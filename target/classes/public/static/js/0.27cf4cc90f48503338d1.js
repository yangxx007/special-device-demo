webpackJsonp([0],{173:function(t,a,e){function n(t){e(302)}var s=e(5)(e(222),e(335),n,"data-v-5ea59eb8",null);t.exports=s.exports},204:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default={name:"detailPdf",props:["pdfUrl","pdfNum"],data:function(){return{pdfToggle:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},methods:{writepdf:function(){if(0==this.pdfToggle.length)for(var t=0;t<this.pdfNum;t++)this.pdfToggle[t]=1},test:function(t){this.writepdf(),1==this.pdfToggle[t]?this.pdfToggle.splice(t,1,0):0==this.pdfToggle[t]&&this.pdfToggle.splice(t,1,1)}}}},205:function(t,a,e){a=t.exports=e(168)(!0),a.push([t.i,".detail_li[data-v-09875984]{margin:10px;font-size:small}","",{version:3,sources:["/Users/zhangyunlong/Downloads/my-project/src/components/detailpdf/detailPdf.vue"],names:[],mappings:"AACA,4BACE,YAAa,AACb,eAAiB,CAClB",file:"detailPdf.vue",sourcesContent:["\n.detail_li[data-v-09875984] {\n  margin: 10px;\n  font-size: small;\n}\n"],sourceRoot:""}])},206:function(t,a,e){var n=e(205);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e(169)("6e9ce622",n,!0)},207:function(t,a,e){function n(t){e(206)}var s=e(5)(e(204),e(208),n,"data-v-09875984",null);t.exports=s.exports},208:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"detailPdf"},[e("ul",{staticClass:"detail_ul"},t._l(t.pdfUrl,function(a,n,s){return e("li",{staticClass:"detail_li"},[e("a",{staticClass:"detail_a",attrs:{href:"/file/download?fileId="+a,download:"key"}},[t._v(t._s(n.replace(/\d+/g,""))+".pdf")]),t._v(" "),1==t.pdfToggle[s]?e("Button",{attrs:{type:"ghost",size:"small"},on:{click:function(a){t.test(s)}}},[e("Icon",{attrs:{type:"eye"}}),t._v("\n        预览\n      ")],1):e("Button",{attrs:{type:"ghost",size:"small"},on:{click:function(a){t.test(s)}}},[e("Icon",{attrs:{type:"chevron-down"}}),t._v("\n        收起\n      ")],1),t._v(" "),0==t.pdfToggle[s]?e("embed",{attrs:{src:"/file/preview?fileId="+a,width:"100%",height:"1000px"}}):t._e()],1)}))])},staticRenderFns:[]}},210:function(t,a,e){"use strict";function n(t){return e.i(i.a)("/admin/unapprovedApplies/get",t,"post")}function s(t){return e.i(i.a)("/admin/approvedApplies/get",t,"post")}function o(t){return e.i(i.a)("/apply/get?"+t,t,"get")}a.d=n,a.b=s,a.c=o;var i=e(32)},212:function(t,a,e){"use strict";e(32)},214:function(t,a,e){"use strict";function n(t){return e.i(i.a)("/admin/unacceptedApplies/get",t,"post")}function s(t){return e.i(i.a)("/admin/acceptedApplies/get",t,"post")}function o(t){return e.i(i.a)("/apply/get?"+t,t,"get")}a.c=n,a.a=s,a.b=o;var i=e(32)},222:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=e(13),s=e.n(n),o=e(3),i=e.n(o),p=e(6),r=e(207),c=e.n(r),l=e(252);e(212),e(214),e(210);a.default={data:function(){var t;return t={ruleForm:[],dev_id:"",dev_name:"",deviceSortNum:"",value1:"",pdfUrl:{},pdfNum:0,accStatus:"",accReason:"",approvalStatus:"",showPrintCard:!1,approvalRejValue:"",approvalReason:"",orderState:"",ruleForms:[],useComName:"",registPdfUrl:""},i()(t,"ruleForm",{}),i()(t,"current",0),i()(t,"applyId",""),i()(t,"unAcceptedReason",[]),i()(t,"unAcceptedContent",""),i()(t,"unApprovalReason",[]),i()(t,"unApprovalContent",""),i()(t,"applyType",""),i()(t,"active",0),i()(t,"deviceCategory",""),i()(t,"eqCode",""),i()(t,"eqComCode",""),i()(t,"registKind",""),i()(t,"applyDate",""),i()(t,"acceptorAgencyName",""),t},activated:function(){this.initData()},methods:s()({},e.i(p.b)({}),{printTrigger:function(t){var a=document.getElementById(t);a.focus(),a.contentWindow.print()},initData:function(){var t=this;this.transparam(),this.current=0,this.active=0,this.approvalStatus="",this.unAcceptedReason=[],this.unAcceptedContent="",this.unApprovalReason=[],this.unApprovalContent="",this.showPrintCard=!1;var a="applyId="+this.$route.query.applyId;l.a(a).then(function(a){t.applyType=a.data.applyType+"/"+a.data.deviceType,a.data.forms["特种设备使用登记表二"]?t.fileId=a.data.forms["特种设备使用登记表二"]:a.data.forms["特种设备使用登记表一"]?t.fileId=a.data.forms["特种设备使用登记表一"]:a.data.forms["特种设备使用登记表三"]?t.fileId=a.data.forms["特种设备使用登记表三"]:a.data.forms["特种设备停用注销报废登记表"]&&(t.fileId=a.data.forms["特种设备停用注销报废登记表"]),t.registPdfUrl=a.data.forms,t.pdfUrl=a.data.files,"已提交待受理"==a.data.status.states?t.accStatus="":"已受理待审批"==a.data.status.states?(t.accStatus=!0,t.accReason="已受理通过"):"受理驳回"===a.data.status.states&&(t.accStatus=!1,t.accReason=a.data.status.acceptedComments||"受理驳回"),"已审批通过"===a.data.status.states?(t.approvalStatus=!0,t.approvalReason="已审批通过",t.accStatus=!0,t.accReason="已受理通过"):"审批驳回"===a.data.status.states&&(t.approvalStatus=!1,t.approvalReason=a.data.status.approveComments||"审批驳回",t.accStatus=!0,t.accReason="已受理通过"),a.data.formList[0].useComName&&(t.useComName=a.data.formList[0].useComName),t.deviceCategory=a.data.deviceCategory||"无",t.eqCode=a.data.formList[0].eqCode||"无",t.eqComCode=a.data.formList[0].eqComCode||"无",t.registKind=a.data.registKind||a.data.applyType;var e=new Date(a.data.createTime),n=e.getFullYear()+"-",s=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",o=e.getDate()+" ";t.applyDate=n+s+o,a.data.acceptorAgencyName&&(t.acceptorAgencyName=a.data.acceptorAgencyName||"无")}).catch(function(t){console.log(t)}),this.unAcceptedContent="",this.approvalRejValue=""},transparam:function(){this.$route.query.applyId&&(this.applyId=this.$route.query.applyId),this.$route.query.orderState&&(this.orderState=this.$route.query.orderState)},accPass:function(){var t=this;this.$Modal.confirm({title:"确认信息",content:"<p>确认通过该申请订单？</p>",onOk:function(){t.$Message.info("点击了确定");var a={applyId:t.applyId,pass:!0};l.b(a).then(function(a){200===a.status?t.$router.push("waitAccept"):t.$Message.info(a.msg)}).catch(function(t){console.log(t)})},onCancel:function(){t.$Message.info("点击了取消")}})},accRej:function(){var t=this;this.$Modal.confirm({title:"受理驳回",render:function(a){return a("div",[a("h4",{props:{value:t.value},style:{marginLeft:"-40px"}},"原因："),a("checkbox",{props:{value:t.value},on:{input:function(a){t.unAcceptedReason.push("申请资料不齐")}}},"申请资料不齐"),a("checkbox",{props:{value:t.value},on:{input:function(a){t.unAcceptedReason.push("不符合规定")}}},"不符合规定"),a("h4",{props:{value:t.value},style:{marginLeft:"-40px"}},"详情："),a("Input",{props:{value:t.value,autofocus:!0,placeholder:"请输入驳回理由详情",type:"textarea",rows:5},on:{input:function(a){t.unAcceptedContent=a}}})])},onOk:function(){t.$Message.info("点击了确定");var a={applyId:t.applyId,pass:!1,comments:t.unAcceptedContent,rejectReasons:t.unAcceptedReason[0]+t.unAcceptedReason[1]};l.c(a).then(function(a){console.log(a),200===a.status?t.$router.push("waitAccept"):t.$Message.info(a.msg)}).catch(function(t){console.log(t)})},onCancel:function(){t.unAcceptedContent="",t.unAcceptedReason=[],t.$Message.info("点击了取消")}})},approvalPass:function(){var t=this;this.$Modal.confirm({title:"确认信息",content:"<p>确认审批通过该申请订单？</p>",onOk:function(){var a={applyId:t.applyId,pass:!0};l.d(a).then(function(a){200===a.status?(t.approvalStatus=!0,t.showPrintCard=!0,t.current++):t.$Message.info(a.msg)}).catch(function(t){console.log(t)})},onCancel:function(){t.$Message.info("点击了取消")}})},approvalRej:function(){var t=this;this.$Modal.confirm({title:"审批驳回",render:function(a){return a("div",[a("h4",{props:{value:t.value},style:{marginLeft:"-40px"}},"原因："),a("checkbox",{props:{value:t.value},on:{input:function(a){t.unApprovalReason.push("不予登记")}}},"不予登记"),a("checkbox",{props:{value:t.value},on:{input:function(a){t.unApprovalReason.push("对申请资料有疑问，需要进行现场核查")}}},"对申请资料有疑问，需要进行现场核查"),a("h4",{props:{value:t.value},style:{marginLeft:"-40px"}},"详情："),a("Input",{props:{value:t.value,autofocus:!0,placeholder:"请输入驳回理由详情",type:"textarea",rows:5},on:{input:function(a){t.unApprovalContent=a}}})])},onOk:function(){t.$Message.info("点击了确定");var a={applyId:t.applyId,pass:!1,comments:t.unApprovalContent,rejectReasons:t.unApprovalReason[0]+t.unApprovalReason[1]};l.e(a).then(function(a){200===a.status?t.$router.push("waitApproval"):t.$Message.info(a.msg)}).catch(function(t){console.log(t)})},onCancel:function(){t.unApprovalContent="",t.unApprovalReason=[],t.$Message.info("点击了取消")}})},instance:function(t){this.current++,this.$Message.info("您已完成审批、发证"),this.$router.push("waitApproval")}}),computed:s()({},e.i(p.c)(["registOne"]),e.i(p.a)([])),components:{"v-detailPdf":c.a}}},252:function(t,a,e){"use strict";function n(t){return e.i(r.a)("/admin/apply/accept",t,"post")}function s(t){return e.i(r.a)("/admin/apply/accept",t,"post")}function o(t){return e.i(r.a)("/admin/apply/approve",t,"post")}function i(t){return e.i(r.a)("/admin/apply/approve",t,"post")}function p(t){return e.i(r.a)("/apply/get?"+t,t,"get")}a.b=n,a.c=s,a.d=o,a.e=i,a.a=p;var r=e(32)},269:function(t,a,e){a=t.exports=e(168)(!0),a.push([t.i,"@media print{.print[data-v-5ea59eb8]{display:block}.nprint[data-v-5ea59eb8]{display:none}}.appDetail[data-v-5ea59eb8]{font-size:19px}.comp_name[data-v-5ea59eb8]{margin-bottom:30px}.setTable[data-v-5ea59eb8]{margin-bottom:30px;font-size:16px}.pdfdownload[data-v-5ea59eb8]{margin-bottom:30px}.detailHeadTop[data-v-5ea59eb8]{margin-bottom:15px;color:#1c2438}.detailHead[data-v-5ea59eb8]{margin:20px 0;color:#1c2438}.content[data-v-5ea59eb8]{color:#495060;font-size:17px}.panel_content[data-v-5ea59eb8]{font-size:small;color:#495060}.acceptReason[data-v-5ea59eb8]{margin-bottom:20px}.comp_name_content[data-v-5ea59eb8]{font-size:17px}.base-box[data-v-5ea59eb8]{margin:0 auto;width:100%;display:block;border:2px solid #dddee1;border-top-left-radius:0;border-top-right-radius:0;border-bottom-right-radius:3px;border-bottom-left-radius:3px;padding-left:10px;padding-right:10px;padding-top:10px;box-sizing:border-box;background-color:#fff}.appDetail_topbar[data-v-5ea59eb8]{position:fixed;width:100%;margin:0;padding:0;height:80px;z-index:10;background-color:#fff}","",{version:3,sources:["/Users/zhangyunlong/Downloads/my-project/src/page/apply/avaiableDev/appDetail.vue"],names:[],mappings:"AACA,aACA,wBACI,aAAe,CAClB,AACD,yBACI,YAAc,CACjB,CACA,AACD,4BACE,cAAgB,CACjB,AACD,4BACE,kBAAoB,CACrB,AACD,2BACE,mBAAoB,AACpB,cAAgB,CACjB,AACD,8BACE,kBAAoB,CACrB,AACD,gCACE,mBAAoB,AACpB,aAAe,CAChB,AACD,6BACE,cAAe,AACf,aAAe,CAChB,AACD,0BACE,cAAe,AACf,cAAgB,CACjB,AACD,gCACE,gBAAiB,AACjB,aAAe,CAChB,AACD,+BACE,kBAAoB,CACrB,AACD,oCACE,cAAgB,CACjB,AACD,2BACE,cAAe,AACf,WAAY,AACZ,cAAe,AACf,yBAA0B,AAC1B,yBAA0B,AAC1B,0BAA2B,AAC3B,+BAAgC,AAChC,8BAA+B,AAC/B,kBAAmB,AACnB,mBAAoB,AACpB,iBAAkB,AAClB,sBAAuB,AACvB,qBAAwB,CACzB,AACD,mCACE,eAAgB,AAChB,WAAY,AACZ,SAAY,AACZ,UAAa,AACb,YAAa,AACb,WAAY,AACZ,qBAAwB,CACzB",file:"appDetail.vue",sourcesContent:["\n@media print {\n.print[data-v-5ea59eb8] {\n    display: block;\n}\n.nprint[data-v-5ea59eb8] {\n    display: none;\n}\n}\n.appDetail[data-v-5ea59eb8] {\n  font-size: 19px;\n}\n.comp_name[data-v-5ea59eb8] {\n  margin-bottom: 30px;\n}\n.setTable[data-v-5ea59eb8] {\n  margin-bottom: 30px;\n  font-size: 16px;\n}\n.pdfdownload[data-v-5ea59eb8] {\n  margin-bottom: 30px;\n}\n.detailHeadTop[data-v-5ea59eb8] {\n  margin-bottom: 15px;\n  color: #1c2438;\n}\n.detailHead[data-v-5ea59eb8] {\n  margin: 20px 0;\n  color: #1c2438;\n}\n.content[data-v-5ea59eb8] {\n  color: #495060;\n  font-size: 17px;\n}\n.panel_content[data-v-5ea59eb8] {\n  font-size: small;\n  color: #495060;\n}\n.acceptReason[data-v-5ea59eb8] {\n  margin-bottom: 20px;\n}\n.comp_name_content[data-v-5ea59eb8] {\n  font-size: 17px;\n}\n.base-box[data-v-5ea59eb8] {\n  margin: 0 auto;\n  width: 100%;\n  display: block;\n  border: 2px solid #dddee1;\n  border-top-left-radius: 0;\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 3px;\n  border-bottom-left-radius: 3px;\n  padding-left: 10px;\n  padding-right: 10px;\n  padding-top: 10px;\n  box-sizing: border-box;\n  background-color: white;\n}\n.appDetail_topbar[data-v-5ea59eb8] {\n  position: fixed;\n  width: 100%;\n  margin: 0px;\n  padding: 0px;\n  height: 80px;\n  z-index: 10;\n  background-color: white;\n}\n"],sourceRoot:""}])},302:function(t,a,e){var n=e(269);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);e(169)("5287059b",n,!0)},335:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"appDetail"},[e("div",{staticClass:"appDetail_topbar"}),t._v(" "),e("div",{staticClass:"appDetail_topbar"},[0==this.showPrintCard?e("h1",{staticStyle:{margin:"10px"}},[t._v("申请详情：")]):t._e(),t._v(" "),1==this.showPrintCard?e("div",{staticClass:"step",staticStyle:{width:"94%","margin-top":"20px"}},[e("Steps",{attrs:{current:t.current}},[e("Step",{attrs:{title:"步骤1",content:"检查申请信息"}}),t._v(" "),e("Step",{attrs:{title:"步骤2",content:"签发使用登记证"}}),t._v(" "),e("Step",{attrs:{title:"步骤3",content:"完成"}})],1)],1):t._e()]),t._v(" "),0==this.showPrintCard?e("div",{staticClass:"setApp_content",staticStyle:{position:"absolute",top:"85px"}},[e("div",{staticClass:"comp_name"},[e("h2",{staticClass:"detailHeadTop"},[t._v("一、基本信息：")]),t._v(" "),e("Row",{staticStyle:{width:"100%"}},[e("Col",{attrs:{span:"12"}},[e("p",{staticClass:"deviceContentHead"},[t._v("使用单位名称 :"),e("span",{staticClass:"content"},[t._v(t._s(this.useComName))])]),t._v(" "),e("p",{staticClass:"deviceContentHead"},[t._v("设备种类 :"),e("span",{staticClass:"content"},[t._v(t._s(this.deviceCategory))])])]),t._v(" "),e("Col",{attrs:{span:"11"}},[e("p",{staticClass:"deviceContentHead"},[t._v("设备代码 :"),e("span",{staticClass:"content"},[t._v(t._s(this.eqCode))])]),t._v(" "),e("p",{staticClass:"deviceContentHead"},[t._v("单位内编号 :"),e("span",{staticClass:"content"},[t._v(t._s(this.eqComCode))])])])],1)],1),t._v(" "),e("div",{staticClass:"apply_type"},[e("h2",{staticClass:"detailHeadTop"},[t._v("二、申请信息：")]),t._v(" "),e("Row",{staticStyle:{width:"100%"}},[e("Col",{attrs:{span:"12"}},[e("p",{staticClass:"deviceContentHead"},[t._v("申请类别 :"),e("span",{staticClass:"content"},[t._v(t._s(this.applyType))])]),t._v(" "),e("p",{staticClass:"deviceContentHead"},[t._v("登记类别 :"),e("span",{staticClass:"content"},[t._v(t._s(this.registKind))])])]),t._v(" "),e("Col",{attrs:{span:"11"}},[e("p",{staticClass:"deviceContentHead"},[t._v("申请日期 :"),e("span",{staticClass:"content"},[t._v(t._s(this.applyDate))])]),t._v(" "),e("p",{staticClass:"deviceContentHead"},[t._v("登记记关 :"),e("span",{staticClass:"content"},[t._v(t._s(this.acceptorAgencyName))])])])],1)],1),t._v(" "),e("div",{staticClass:"setTable"},[e("h2",{staticClass:"detailHead",staticStyle:{"font-size":"29px"}},[t._v("三、特种设备使用登记表：")]),t._v(" "),e("ul",{staticClass:"detail_ul"},t._l(this.registPdfUrl,function(a,n,s){return e("li",{staticClass:"detail_li",staticStyle:{width:"800px",height:"1000px"}},[e("a",{staticClass:"detail_a",attrs:{href:"/file/download?fileId="+a,download:"key"}},[t._v(t._s(n)+".pdf")]),t._v(" "),e("embed",{attrs:{src:"/file/preview?fileId="+a,width:"100%",height:"1000px"}})])}))]),t._v(" "),e("div",{staticClass:"pdfdownload"},[e("h2",{staticClass:"detailHead"},[t._v("四、提交的资料：")]),t._v(" "),e("v-detailPdf",{attrs:{pdfUrl:t.pdfUrl,pdfNum:t.pdfNum}})],1),t._v(" "),e("div",{staticClass:"accpeterControl"},["waitAccept"==t.orderState?e("Button",{attrs:{type:"primary"},on:{click:t.accPass}},[t._v("受理通过")]):t._e(),t._v(" "),"waitAccept"==t.orderState?e("Button",{attrs:{type:"success"},on:{click:t.accRej}},[t._v("受理驳回")]):t._e()],1),t._v(" "),"waitApproval"==t.orderState||"approvaled"==t.orderState||"accepted"==t.orderState||""!==this.accStatus?e("div",{staticClass:"acceptReason"},[e("h2",{staticClass:"detailHead"},[t._v("五、受理决定：")]),t._v(" "),1==this.accStatus?e("span",{staticClass:"content"},[t._v(t._s(this.accReason))]):t._e(),t._v(" "),0==this.accStatus?e("span",{staticClass:"content"},[t._v(t._s(this.accReason))]):t._e()]):t._e(),t._v(" "),e("div",{staticClass:"approvalControl"},["waitApproval"==t.orderState&&0==t.approvalStatus?e("Button",{attrs:{type:"primary"},on:{click:t.approvalPass}},[t._v("审批通过\n      ")]):t._e(),t._v(" "),"waitApproval"==t.orderState&&0==t.approvalStatus?e("Button",{attrs:{type:"success"},on:{click:t.approvalRej}},[t._v("审批驳回")]):t._e()],1),t._v(" "),"approvaled"==t.orderState||""!==this.approvalStatus?e("div",{staticClass:"acceptReason"},[e("h2",{staticClass:"detailHead"},[t._v("五、登记发证决定：")]),t._v(" "),1==this.approvalStatus?e("span",{staticClass:"content"},[t._v(t._s(this.approvalReason))]):t._e(),t._v(" "),0==this.approvalStatus?e("span",{staticClass:"content"},[t._v(t._s(this.approvalReason))]):t._e()]):t._e(),t._v(" "),1==this.approvalStatus?e("Button",{attrs:{type:"warning"},on:{click:function(a){t.printTrigger("iFramePdf")}}},[t._v("打印使用登记证")]):t._e()],1):t._e(),t._v(" "),1==this.showPrintCard?e("div",{staticClass:"appro_form",staticStyle:{position:"absolute",top:"85px"}},[e("div",{staticClass:"print_page"},[e("h2",[t._v("签发使用登记证")]),t._v(" "),e("br"),t._v(" "),e("Button",{attrs:{type:"warning"},on:{click:function(a){t.printTrigger("iFramePdf")}}},[t._v("打印使用登记证")]),t._v(" "),0==this.active?e("Button",{on:{click:function(a){t.instance("success")}}},[t._v("打印完成")]):t._e()],1)]):t._e()])},staticRenderFns:[]}}});
//# sourceMappingURL=0.27cf4cc90f48503338d1.js.map